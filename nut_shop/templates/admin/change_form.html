{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrahead %}
{{ block.super }}
<script src="{% static 'admin/js/jquery.init.js' %}"></script>
<script type="text/javascript">
    (function($) {
        $(document).ready(function() {
            var previewButton = $('<input type="button" value="Предпросмотр" class="preview-button">');
            $('.submit-row').prepend(previewButton);
            
            previewButton.click(function() {
                var productId = '{{ original.pk }}';
                var previewUrl = '{% url "admin:product_preview" product_id=12345 %}'.replace('12345', productId);
                window.open(previewUrl, '_blank');
            });
        });
    })(django.jQuery);
</script>
{% endblock %}
